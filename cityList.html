<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=640px, user-scalable=no">
    <title>职典-查职业，查薪酬</title>
    <link rel="stylesheet" href="/static/css/common.css"/>
    <link rel="stylesheet" href="/static/css/cityList.css"/>
    <link rel="stylesheet" href="/static/css/pop.css">
    <script src="/static/js/common.js"></script>
</head>
<body>
    <div id="cityList" @click="showSearch=false" :style="{height:clientH + 'px'}" @scroll="viewmore">
        <!-- 头部 -->
        <header>
            <button @click="toIndex"><img src="/static/img/index.svg" alt=""></button>
            <section>
                <input type="text" placeholder="填专业，选就业高薪城市" v-model="searchTxt" @focus="clearTxt" @input="getSearchTxt">
                <ul v-show="showSearch">
                    <li v-for="item in professList" @click.stop="getCityAvg(item.id, item.name)">{{item.name}}</li>
                </ul>
            </section>
        </header>

        <!-- 城市平均 -->
        <section class="avg">
            <section v-show="!showChart">
                <h1>城市平均数据</h1>
                <section>
                    <p>{{cityAvg}}</p>
                    <p>对口职位在聘数</p>
                </section>
                <section>
                    <p><span>￥</span>{{parseInt(avgSalary*1000)}}</p>
                    <p>平均薪酬</p>
                </section>
            </section>
            <section v-show="showChart">
                <div id="chart"></div>
                <button @click="clearChart">一键取消</button>
            </section>
        </section>


        <!-- 城市列表 -->
        <section class="list">
            <div v-for="item in cityList">
                <section>
                    <h2>{{item.districtnname}}</h2>
                    <section>
                        <p>{{item.totalrequired}}</p>
                        <p>对口职位在聘数</p>  
                    </section>
                    <section>
                        <p><span>￥</span>{{parseInt(item.cityAvgSalary)}}</p>
                        <p>平均薪酬</p>
                    </section>
                </section>
                <ul>
                    <li><span>房租收入比</span><em>{{(item.rentIncome*100).toFixed(1)}}%</em></li>
                    <li><span>月人均消费</span><em>{{parseInt(item.monthlyPerCapitaConsumption)}}元</em></li>
                    <li><span>净流入人才数</span><em>{{item.netInflowOfTalents < 0 ? parseInt(item.netInflowOfTalents/1000) : '+' + parseInt(item.netInflowOfTalents/1000)}}k</em></li>
                    <li><span>平均房价</span><em>{{item.averageHousePrice}}元/m²</em></li>
                </ul>
                <button @click="CompareOrNot(item)" :class="{active:!item.compareBtn}">{{item.compareBtn ? "+对比": "取消" }}</button>
            </div>
        </section>

        <p class="bottom" v-show="showLogin"><img src="/static//img/load.svg" alt=""> 加载中...</p>
        <p class="bottom" v-show="showTxt">—  不止诗与远方  —</p>
        <section class="loading" v-show="showLoading">
        <img src="/static/img/loading.svg" alt="">
        <p>正在加载...</p>
        </section>
        <section class="no-data" v-show="showNoData">
        <img src="/static/img/zanwu_02.png" alt="">
        <p v-text="note"></p>
        </section>

        <!---top按钮--->
        <totop dom="cityList" :show="showToTop"></totop>
        <button class="top switch" @click="goToSalary">切换<br />薪酬</button>

        <!--支付-立即开通弹窗-->
        <paypop :show="showPayPop"></paypop>
    </div>
    <script src="https://res2.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script src="/static/js/vue.js"></script>
    <script src="/static/js/axios.js"></script>
    <script src="/static/js/interceptor.js"></script>
    <script src="/static/js/components/payPop.js"></script>
    <script src="/static/js/components/toTop.js"></script>
    <script src="/static/js/share.js"></script>
    <script src="/static/js/echarts.min.js"></script>
    <script src="/static/js/pages/cityList.js"></script>
</body>
</html>